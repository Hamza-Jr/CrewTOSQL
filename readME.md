


CrewToSQL  - Web Interface Setup
This guide will help you set up the FastAPI backend and Streamlit frontend for your Student SQL Crew project.
ğŸ“ Project Structure (Updated)
studentâ€‘sqlâ€‘crew/
â”‚
â”œâ”€ data/
â”‚   â”œâ”€ schema.sql
â”‚   â””â”€ student_transcripts_tracking.sqlite   # autogenerated at first run
â”‚
â”œâ”€ src/
|   |â”€ initializer.py
â”‚   â”œâ”€ vectorstore_setup.py
|   |â”€ paths.py
â”‚   â”œâ”€ tools/
â”‚   â”‚   â”œâ”€ sql_execution.py
â”‚   â”‚   â”œâ”€ sql_error_retrieval.py
â”‚   â”‚   â””â”€ vector_search.py
â”‚   â”œâ”€ agents/
â”‚   â”‚   â”œâ”€ query_understanding.py
â”‚   â”‚   â”œâ”€ schema_retrieval.py
â”‚   â”‚   â”œâ”€ sql_generator.py
â”‚   â”‚   â””â”€ sql_exec_repair.py
â”‚   â”œâ”€ tasks/
â”‚         â”œâ”€ query_understanding_task.py
â”‚         â”œâ”€ schema_retrieval_task.py
â”‚         â”œâ”€ sql_generation_task.py
â”‚         â””â”€ sql_exec_repair_task.py
â”‚   
â”œâ”€ web/                          # NEW: Web interface files
â”‚   â”œâ”€ app.py                    # FastAPI backend
â”‚   â”œâ”€ streamlit_app.py          # Streamlit frontend
â”‚   â”œâ”€ requirements_api.txt      # API dependencies
â”‚   â””â”€ requirements_streamlit.txt # Frontend dependencies
â”‚
â”œâ”€ chroma_data1/          # autoâ€‘generated, add to .gitignore
â”œâ”€ .env                   # holds GOOGLE_API_KEY=...
â”œâ”€ requirements.txt
|â”€ build.py
â””â”€ .gitignore




ğŸš€ Setup Instructions
Step 1: Install Dependencies
For FastAPI Backend:
bashpip install -r web/requirements_api.txt
For Streamlit Frontend:
bashpip install -r web/requirements_streamlit.txt
Step 2: Update Your Environment Variables
Make sure your .env file includes:
envGEMINI_API_KEY=your_gemini_api_key_here
DB_PATH=data/student_transcripts_tracking.sqlite
CHROMA_DIR=chroma_data1
Step 3: Start the FastAPI Backend
bash# From your project root directory
cd web
python app.py
The API will be available at: http://localhost:8000
You can test it at: http://localhost:8000/docs (FastAPI auto-generated documentation)
Step 4: Start the Streamlit Frontend
In a new terminal window:
bash# From your project root directory
cd web
streamlit run streamlit_app.py
The Streamlit app will be available at: http://localhost:8501
ğŸ¯ Features
FastAPI Backend (app.py)

RESTful API wrapper around your multi-agent system
Error handling and logging
CORS support for frontend integration
Health check endpoint
Example queries endpoint
Processing time tracking

Streamlit Frontend (streamlit_app.py)

Beautiful, modern UI with custom CSS styling
Real-time query processing with progress indicators
Query history and examples
API health monitoring
Results visualization (tables, JSON, text)
Responsive design with sidebar navigation

ğŸ”§ API Endpoints
EndpointMethodDescription/GETAPI information/healthGETHealth check/queryPOSTProcess natural language query/examplesGETGet example queries
ğŸ’¡ Usage Examples
API Usage (curl)
bash# Health check
curl http://localhost:8000/health

# Process a query
curl -X POST "http://localhost:8000/query" \
     -H "Content-Type: application/json" \
     -d '{"query": "What are all the addresses including line 1 and line 2?"}'
Frontend Usage

Open http://localhost:8501 in your browser
Type your question in natural language
Click "ğŸš€ Process Query"
View results in a beautiful format
Use example queries from the sidebar
Check your query history

ğŸ› ï¸ Customization
Adding New Example Queries
Edit the get_example_queries() function in streamlit_app.py or update the /examples endpoint in app.py.
Styling Changes
Modify the CSS in the st.markdown() section of streamlit_app.py.
API Configuration
Update the API_BASE_URL in streamlit_app.py if deploying to different servers.
ğŸ“Š Features Included

âœ… Multi-agent query processing
âœ… Beautiful, responsive UI
âœ… Real-time processing indicators
âœ… Query history tracking
âœ… Error handling and display
âœ… API health monitoring
âœ… Example query suggestions
âœ… Results visualization
âœ… Processing time tracking

ğŸ” Troubleshooting
API not accessible:

Make sure FastAPI server is running on port 8000
Check your .env file has all required variables
Verify your existing crew system works with python src/main.py

Streamlit connection errors:

Ensure API_BASE_URL in streamlit_app.py matches your FastAPI server
Check firewall/port settings
Verify both servers are running

Dependencies issues:

Install requirements in separate environments if needed
Make sure your existing project requirements are also installed

ğŸ‰ You're Ready!
Your Student SQL Crew now has a beautiful web interface! Users can ask questions in natural language and get results through an intuitive, modern interface.